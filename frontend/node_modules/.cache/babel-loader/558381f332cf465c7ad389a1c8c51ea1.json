{"ast":null,"code":"var _jsxFileName = \"D:\\\\DuAn\\\\thangdoan\\\\dynonary-english\\\\frontend\\\\src\\\\components\\\\UI\\\\SearchInputCustom\\\\index.js\",\n  _s = $RefreshSig$();\nimport { Grow } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport wordApi from 'apis/wordApi';\nimport { MAX } from 'constant';\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\nimport { debounce } from 'helper';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport WordDetailModal from '../WordDetailModal';\nimport useStyle from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet timer = null;\nfunction SearchInputCustom({\n  placeholder,\n  showInput,\n  prefixIcon\n}) {\n  _s();\n  const classes = useStyle();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const searchBarRef = useRef(null);\n  const [resultList, setResultList] = useState([]);\n  const [wordDetails, setWordDetails] = useState(null);\n  const history = useHistory();\n  const handleCloseModal = () => {\n    setAnchorEl(null);\n  };\n  const handleOpenWordDetails = async (word, to) => {\n    setAnchorEl(null);\n    if (Boolean(to)) {\n      history.push(to);\n      return;\n    }\n    const apiRes = await wordApi.getWordDetails(word);\n    setWordDetails(apiRes === null || apiRes === void 0 ? void 0 : apiRes.data);\n  };\n  const handleSearch = e => {\n    timer = debounce(timer, async function () {\n      var _e$target, _apiRes$data, _navSearchList;\n      const word = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value;\n      if (!Boolean(word)) {\n        return;\n      }\n      let navSearchList = NAV_SEARCH_DATA.filter(i => `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1).map(i => ({\n        title: i.title,\n        to: i.to\n      })) || [];\n      const apiRes = await wordApi.getSearchWord(word, true);\n      if ((_apiRes$data = apiRes.data) !== null && _apiRes$data !== void 0 && _apiRes$data.packList) {\n        navSearchList = [...navSearchList, ...apiRes.data.packList.map(i => ({\n          title: i.word,\n          to: null\n        }))];\n      }\n      setResultList(((_navSearchList = navSearchList) === null || _navSearchList === void 0 ? void 0 : _navSearchList.slice(0, 20)) || []);\n      setAnchorEl(searchBarRef.current);\n    }, 350);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.nativeInput,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: searchBarRef,\n      className: `${classes.icon} flex-center ${showInput ? 'show-input' : 'cur-pointer'}`,\n      children: prefixIcon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), showInput && /*#__PURE__*/_jsxDEV(Grow, {\n      in: true,\n      children: /*#__PURE__*/_jsxDEV(InputBase, {\n        onChange: handleSearch,\n        autoFocus: true,\n        placeholder: placeholder,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        inputProps: {\n          'aria-label': 'search',\n          maxLength: MAX.SEARCH_LEN\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      classes: {\n        paper: classes.resMenu\n      },\n      keepMounted: true,\n      anchorEl: anchorEl,\n      getContentAnchorEl: null,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      open: Boolean(anchorEl),\n      onClose: handleCloseModal,\n      children: (resultList === null || resultList === void 0 ? void 0 : resultList.length) > 0 ? resultList.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => handleOpenWordDetails(item.title, item.to),\n        children: item.title\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(MenuItem, {\n        className: classes.resMenuItem,\n        onClick: handleCloseModal,\n        children: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), wordDetails && /*#__PURE__*/_jsxDEV(WordDetailModal, {\n      open: true,\n      loading: false,\n      ...wordDetails,\n      onClose: () => setWordDetails(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchInputCustom, \"Wwjm8QKIKXtWL+oBl+FoP2d0qTU=\", false, function () {\n  return [useStyle, useHistory];\n});\n_c = SearchInputCustom;\nSearchInputCustom.propTypes = {\n  placeholder: PropTypes.string,\n  prefixIcon: PropTypes.any,\n  showInput: PropTypes.bool\n};\nSearchInputCustom.defaultProps = {\n  placeholder: '',\n  prefixIcon: null,\n  showInput: false\n};\nexport default SearchInputCustom;\nvar _c;\n$RefreshReg$(_c, \"SearchInputCustom\");","map":{"version":3,"names":["Grow","InputBase","Menu","MenuItem","wordApi","MAX","NAV_SEARCH_DATA","debounce","PropTypes","React","useRef","useState","useHistory","WordDetailModal","useStyle","jsxDEV","_jsxDEV","timer","SearchInputCustom","placeholder","showInput","prefixIcon","_s","classes","anchorEl","setAnchorEl","searchBarRef","resultList","setResultList","wordDetails","setWordDetails","history","handleCloseModal","handleOpenWordDetails","word","to","Boolean","push","apiRes","getWordDetails","data","handleSearch","e","_e$target","_apiRes$data","_navSearchList","target","value","navSearchList","filter","i","title","searchKey","indexOf","toLowerCase","map","getSearchWord","packList","slice","current","className","nativeInput","children","ref","icon","fileName","_jsxFileName","lineNumber","columnNumber","in","onChange","autoFocus","root","inputRoot","input","inputInput","inputProps","maxLength","SEARCH_LEN","paper","resMenu","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","open","onClose","length","item","index","onClick","resMenuItem","loading","_c","propTypes","string","any","bool","defaultProps","$RefreshReg$"],"sources":["D:/DuAn/thangdoan/dynonary-english/frontend/src/components/UI/SearchInputCustom/index.js"],"sourcesContent":["import { Grow } from '@material-ui/core';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport wordApi from 'apis/wordApi';\r\nimport { MAX } from 'constant';\r\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\r\nimport { debounce } from 'helper';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useRef, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport WordDetailModal from '../WordDetailModal';\r\nimport useStyle from './style';\r\nlet timer = null;\r\n\r\nfunction SearchInputCustom({ placeholder, showInput, prefixIcon }) {\r\n  const classes = useStyle();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const searchBarRef = useRef(null);\r\n  const [resultList, setResultList] = useState([]);\r\n  const [wordDetails, setWordDetails] = useState(null);\r\n  const history = useHistory();\r\n\r\n  const handleCloseModal = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleOpenWordDetails = async (word, to) => {\r\n    setAnchorEl(null);\r\n\r\n    if (Boolean(to)) {\r\n      history.push(to);\r\n      return;\r\n    }\r\n\r\n    const apiRes = await wordApi.getWordDetails(word);\r\n    setWordDetails(apiRes?.data);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    timer = debounce(\r\n      timer,\r\n      async function () {\r\n        const word = e.target?.value;\r\n        if (!Boolean(word)) {\r\n          return;\r\n        }\r\n        let navSearchList =\r\n          NAV_SEARCH_DATA.filter(\r\n            (i) =>\r\n              `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1,\r\n          ).map((i) => ({ title: i.title, to: i.to })) || [];\r\n\r\n        const apiRes = await wordApi.getSearchWord(word, true);\r\n        if (apiRes.data?.packList) {\r\n          navSearchList = [\r\n            ...navSearchList,\r\n            ...apiRes.data.packList.map((i) => ({ title: i.word, to: null })),\r\n          ];\r\n        }\r\n\r\n        setResultList(navSearchList?.slice(0, 20) || []);\r\n        setAnchorEl(searchBarRef.current);\r\n      },\r\n      350,\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.nativeInput}>\r\n      <div\r\n        ref={searchBarRef}\r\n        className={`${classes.icon} flex-center ${\r\n          showInput ? 'show-input' : 'cur-pointer'\r\n        }`}>\r\n        {prefixIcon}\r\n      </div>\r\n      {showInput && (\r\n        <Grow in={true}>\r\n          <InputBase\r\n            onChange={handleSearch}\r\n            autoFocus\r\n            placeholder={placeholder}\r\n            classes={{\r\n              root: classes.inputRoot,\r\n              input: classes.inputInput,\r\n            }}\r\n            inputProps={{ 'aria-label': 'search', maxLength: MAX.SEARCH_LEN }}\r\n          />\r\n        </Grow>\r\n      )}\r\n\r\n      {/* result menu */}\r\n      <Menu\r\n        classes={{\r\n          paper: classes.resMenu,\r\n        }}\r\n        keepMounted\r\n        anchorEl={anchorEl}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleCloseModal}>\r\n        {resultList?.length > 0 ? (\r\n          resultList.map((item, index) => (\r\n            <MenuItem\r\n              key={index}\r\n              onClick={() => handleOpenWordDetails(item.title, item.to)}>\r\n              {item.title}\r\n            </MenuItem>\r\n          ))\r\n        ) : (\r\n          <MenuItem className={classes.resMenuItem} onClick={handleCloseModal}>\r\n            Không tìm thấy kết quả nào\r\n          </MenuItem>\r\n        )}\r\n      </Menu>\r\n\r\n      {/* word detail modal */}\r\n      {wordDetails && (\r\n        <WordDetailModal\r\n          open={true}\r\n          loading={false}\r\n          {...wordDetails}\r\n          onClose={() => setWordDetails(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nSearchInputCustom.propTypes = {\r\n  placeholder: PropTypes.string,\r\n  prefixIcon: PropTypes.any,\r\n  showInput: PropTypes.bool,\r\n};\r\n\r\nSearchInputCustom.defaultProps = {\r\n  placeholder: '',\r\n  prefixIcon: null,\r\n  showInput: false,\r\n};\r\n\r\nexport default SearchInputCustom;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}