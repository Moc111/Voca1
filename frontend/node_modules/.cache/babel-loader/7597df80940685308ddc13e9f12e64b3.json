{"ast":null,"code":"import { COLOR_VAR_KEYS, DEFAULTS, THEME_KEYS, VOICE_KEYS } from 'constant';\nconst htmlRoot = document.querySelector(':root');\n\n// prevent execute continuously a function\nexport const debounce = (timer = null, cbFn, delay = 350) => {\n  if (timer) {\n    clearTimeout(timer);\n  }\n  return setTimeout(cbFn, delay);\n};\n\n// compare 2 arrays\nexport const equalArray = (a, b) => {\n  return Array.isArray(a) && Array.isArray(b) && a.length === b.length && a.every((val, index) => val === b[index]);\n};\n\n// get current root palettes\nfunction getRootPalettes() {\n  let palettes = [];\n  const rootStyles = getComputedStyle(htmlRoot);\n  COLOR_VAR_KEYS.forEach(item => {\n    let color = rootStyles.getPropertyValue(item.key);\n    palettes.push({\n      ...item,\n      color: color[0] === '#' ? color : color.slice(1) // output ' #123456' => slice(1) = '#123456'\n    });\n  });\n\n  return palettes;\n}\n\n// get custom palettes from local storage\nexport const getCustomPalettes = () => {\n  const palettes = localStorage.getItem(THEME_KEYS.PALETTE_KEY);\n  if (!palettes) {\n    const newPalettes = getRootPalettes();\n    localStorage.setItem(THEME_KEYS.PALETTE_KEY, JSON.stringify(newPalettes));\n    return newPalettes;\n  } else {\n    return JSON.parse(palettes);\n  }\n};\n\n// set palettes for root\nexport const setRootPalettes = () => {\n  const palettes = getCustomPalettes();\n  palettes === null || palettes === void 0 ? void 0 : palettes.forEach(item => htmlRoot.style.setProperty(item.key, item.color));\n};\n\n// get window voice list\nexport const getSpeechSynthesis = () => {\n  return new Promise(resolve => {\n    let synth = window.speechSynthesis;\n    let intervalId;\n    intervalId = setInterval(() => {\n      if (synth.getVoices().length !== 0) {\n        clearInterval(intervalId);\n        resolve(synth.getVoices());\n      }\n    }, 20);\n  });\n};\n\n// update or add custom voice in local storage\nexport const updateLSVoice = (key, value) => {\n  let current = localStorage.getItem(VOICE_KEYS.LS_KEY);\n  let newLSVoice = {};\n  if (current) {\n    newLSVoice = JSON.parse(current);\n    newLSVoice[key] = value;\n  } else {\n    newLSVoice = {\n      voiceURI: DEFAULTS.VOICE_URI,\n      speed: DEFAULTS.VOICE_SPEED,\n      volume: DEFAULTS.VOICE_VOLUME\n    };\n    newLSVoice[key] = value;\n  }\n  localStorage.setItem(VOICE_KEYS.LS_KEY, JSON.stringify(newLSVoice));\n};\n\n// optimize images\nexport const cloudinaryImgOptimize = (originSrc = '', width = 0, height = 0, fAuto = true, qAuto = true, others = '') => {\n  if (!originSrc) return '';\n  const cloudinaryBaseURL = 'https://res.cloudinary.com/dynonary/image/upload';\n  const index = originSrc.indexOf(cloudinaryBaseURL);\n\n  // Not cloudinary source\n  if (index === -1) {\n    return originSrc;\n  }\n  let optimize = `${width > 0 ? `w_${width},` : ''}${height > 0 ? `h_${height},` : ''}${fAuto ? 'f_auto,' : ''}${qAuto ? 'q_auto,' : ''}${others && others !== '' ? others : ''}`;\n  if (optimize[optimize.length - 1] === ',') optimize = optimize.slice(0, optimize.length - 1);\n  return originSrc.replace(cloudinaryBaseURL, `${cloudinaryBaseURL}/${optimize}`);\n};\nexport const addOrDelItemInArray = (arr = [], item) => {\n  if (!arr || !Array.isArray(arr)) return arr;\n  const index = arr.findIndex(i => i === item);\n  if (index === -1) {\n    arr.push(item);\n    return arr;\n  }\n  arr.splice(index, 1);\n  return arr;\n};\nexport const formatDate = (date = new Date()) => {\n  try {\n    const d = new Date(date);\n    const day = `0${d.getDate()}`.slice(-2);\n    const m = `0${d.getMonth() + 1}`.slice(-2);\n    const y = d.getFullYear();\n    return `${day}-${m}-${y}`;\n  } catch (error) {\n    return date;\n  }\n};","map":{"version":3,"names":["COLOR_VAR_KEYS","DEFAULTS","THEME_KEYS","VOICE_KEYS","htmlRoot","document","querySelector","debounce","timer","cbFn","delay","clearTimeout","setTimeout","equalArray","a","b","Array","isArray","length","every","val","index","getRootPalettes","palettes","rootStyles","getComputedStyle","forEach","item","color","getPropertyValue","key","push","slice","getCustomPalettes","localStorage","getItem","PALETTE_KEY","newPalettes","setItem","JSON","stringify","parse","setRootPalettes","style","setProperty","getSpeechSynthesis","Promise","resolve","synth","window","speechSynthesis","intervalId","setInterval","getVoices","clearInterval","updateLSVoice","value","current","LS_KEY","newLSVoice","voiceURI","VOICE_URI","speed","VOICE_SPEED","volume","VOICE_VOLUME","cloudinaryImgOptimize","originSrc","width","height","fAuto","qAuto","others","cloudinaryBaseURL","indexOf","optimize","replace","addOrDelItemInArray","arr","findIndex","i","splice","formatDate","date","Date","d","day","getDate","m","getMonth","y","getFullYear","error"],"sources":["D:/DuAn/TKwebsite3/dynonary-english/frontend/src/helper/index.js"],"sourcesContent":["import { COLOR_VAR_KEYS, DEFAULTS, THEME_KEYS, VOICE_KEYS } from 'constant';\r\nconst htmlRoot = document.querySelector(':root');\r\n\r\n// prevent execute continuously a function\r\nexport const debounce = (timer = null, cbFn, delay = 350) => {\r\n  if (timer) {\r\n    clearTimeout(timer);\r\n  }\r\n  return setTimeout(cbFn, delay);\r\n};\r\n\r\n// compare 2 arrays\r\nexport const equalArray = (a, b) => {\r\n  return (\r\n    Array.isArray(a) &&\r\n    Array.isArray(b) &&\r\n    a.length === b.length &&\r\n    a.every((val, index) => val === b[index])\r\n  );\r\n};\r\n\r\n// get current root palettes\r\nfunction getRootPalettes() {\r\n  let palettes = [];\r\n  const rootStyles = getComputedStyle(htmlRoot);\r\n\r\n  COLOR_VAR_KEYS.forEach((item) => {\r\n    let color = rootStyles.getPropertyValue(item.key);\r\n\r\n    palettes.push({\r\n      ...item,\r\n      color: color[0] === '#' ? color : color.slice(1), // output ' #123456' => slice(1) = '#123456'\r\n    });\r\n  });\r\n\r\n  return palettes;\r\n}\r\n\r\n// get custom palettes from local storage\r\nexport const getCustomPalettes = () => {\r\n  const palettes = localStorage.getItem(THEME_KEYS.PALETTE_KEY);\r\n  if (!palettes) {\r\n    const newPalettes = getRootPalettes();\r\n    localStorage.setItem(THEME_KEYS.PALETTE_KEY, JSON.stringify(newPalettes));\r\n    return newPalettes;\r\n  } else {\r\n    return JSON.parse(palettes);\r\n  }\r\n};\r\n\r\n// set palettes for root\r\nexport const setRootPalettes = () => {\r\n  const palettes = getCustomPalettes();\r\n  palettes?.forEach((item) => htmlRoot.style.setProperty(item.key, item.color));\r\n};\r\n\r\n// get window voice list\r\nexport const getSpeechSynthesis = () => {\r\n  return new Promise((resolve) => {\r\n    let synth = window.speechSynthesis;\r\n    let intervalId;\r\n\r\n    intervalId = setInterval(() => {\r\n      if (synth.getVoices().length !== 0) {\r\n        clearInterval(intervalId);\r\n        resolve(synth.getVoices());\r\n      }\r\n    }, 20);\r\n  });\r\n};\r\n\r\n// update or add custom voice in local storage\r\nexport const updateLSVoice = (key, value) => {\r\n  let current = localStorage.getItem(VOICE_KEYS.LS_KEY);\r\n  let newLSVoice = {};\r\n\r\n  if (current) {\r\n    newLSVoice = JSON.parse(current);\r\n    newLSVoice[key] = value;\r\n  } else {\r\n    newLSVoice = {\r\n      voiceURI: DEFAULTS.VOICE_URI,\r\n      speed: DEFAULTS.VOICE_SPEED,\r\n      volume: DEFAULTS.VOICE_VOLUME,\r\n    };\r\n    newLSVoice[key] = value;\r\n  }\r\n\r\n  localStorage.setItem(VOICE_KEYS.LS_KEY, JSON.stringify(newLSVoice));\r\n};\r\n\r\n// optimize images\r\nexport const cloudinaryImgOptimize = (\r\n  originSrc = '',\r\n  width = 0,\r\n  height = 0,\r\n  fAuto = true,\r\n  qAuto = true,\r\n  others = '',\r\n) => {\r\n  if (!originSrc) return '';\r\n\r\n  const cloudinaryBaseURL = 'https://res.cloudinary.com/dynonary/image/upload';\r\n  const index = originSrc.indexOf(cloudinaryBaseURL);\r\n\r\n  // Not cloudinary source\r\n  if (index === -1) {\r\n    return originSrc;\r\n  }\r\n\r\n  let optimize = `${width > 0 ? `w_${width},` : ''}${\r\n    height > 0 ? `h_${height},` : ''\r\n  }${fAuto ? 'f_auto,' : ''}${qAuto ? 'q_auto,' : ''}${\r\n    others && others !== '' ? others : ''\r\n  }`;\r\n\r\n  if (optimize[optimize.length - 1] === ',')\r\n    optimize = optimize.slice(0, optimize.length - 1);\r\n\r\n  return originSrc.replace(\r\n    cloudinaryBaseURL,\r\n    `${cloudinaryBaseURL}/${optimize}`,\r\n  );\r\n};\r\n\r\nexport const addOrDelItemInArray = (arr = [], item) => {\r\n  if (!arr || !Array.isArray(arr)) return arr;\r\n\r\n  const index = arr.findIndex((i) => i === item);\r\n\r\n  if (index === -1) {\r\n    arr.push(item);\r\n    return arr;\r\n  }\r\n\r\n  arr.splice(index, 1);\r\n  return arr;\r\n};\r\n\r\nexport const formatDate = (date = new Date()) => {\r\n  try {\r\n    const d = new Date(date);\r\n    const day = `0${d.getDate()}`.slice(-2);\r\n    const m = `0${d.getMonth() + 1}`.slice(-2);\r\n    const y = d.getFullYear();\r\n    return `${day}-${m}-${y}`;\r\n  } catch (error) {\r\n    return date;\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}