{"ast":null,"code":"var _jsxFileName = \"D:\\\\DuAn\\\\thangdoan\\\\dynonary-english\\\\frontend\\\\src\\\\components\\\\Login\\\\SocialNetwork\\\\Facebook.js\",\n  _s = $RefreshSig$();\nimport accountApi from 'apis/accountApi';\nimport fbIcon from 'assets/icons/fb-icon.png';\nimport { UX } from 'constant';\nimport React from 'react';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport { useDispatch } from 'react-redux';\nimport { setMessage } from 'redux/slices/message.slice';\nimport useStyle from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginFacebook() {\n  _s();\n  const classes = useStyle();\n  const dispatch = useDispatch();\n\n  // handle success login\n  const onLoginSuccess = async () => {\n    try {\n      dispatch(setMessage({\n        type: 'success',\n        message: 'Đăng nhập thành công',\n        duration: UX.DELAY_TIME\n      }));\n      setTimeout(() => {\n        location.href = '/';\n      }, UX.DELAY_TIME);\n    } catch (error) {}\n  };\n  const responseFacebook = async response => {\n    try {\n      if (response !== null && response !== void 0 && response.accessToken) {\n        const apiRes = await accountApi.postLoginWithFacebook(response.accessToken);\n        if (apiRes.status === 200) {\n          onLoginSuccess();\n        }\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Đăng nhập thất bại, thử lại !';\n      dispatch(setMessage({\n        type: 'error',\n        message,\n        duration: UX.DELAY_TIME\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(FacebookLogin, {\n    appId: process.env.REACT_APP_FACEBOOK_CLIENT_ID,\n    autoload: false,\n    callback: responseFacebook,\n    render: renderProps => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.socialBtn,\n      onClick: renderProps.onClick,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: classes.socialImg,\n        src: fbIcon,\n        alt: \"FB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.socialName,\n        children: \"Facebook\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginFacebook, \"UJz8eCxZyheAe4tJhAxZ7Ps9B9A=\", false, function () {\n  return [useStyle, useDispatch];\n});\n_c = LoginFacebook;\nexport default LoginFacebook;\nvar _c;\n$RefreshReg$(_c, \"LoginFacebook\");","map":{"version":3,"names":["accountApi","fbIcon","UX","React","FacebookLogin","useDispatch","setMessage","useStyle","jsxDEV","_jsxDEV","LoginFacebook","_s","classes","dispatch","onLoginSuccess","type","message","duration","DELAY_TIME","setTimeout","location","href","error","responseFacebook","response","accessToken","apiRes","postLoginWithFacebook","status","_error$response","_error$response$data","data","appId","process","env","REACT_APP_FACEBOOK_CLIENT_ID","autoload","callback","render","renderProps","className","socialBtn","onClick","children","socialImg","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","socialName","_c","$RefreshReg$"],"sources":["D:/DuAn/thangdoan/dynonary-english/frontend/src/components/Login/SocialNetwork/Facebook.js"],"sourcesContent":["import accountApi from 'apis/accountApi';\r\nimport fbIcon from 'assets/icons/fb-icon.png';\r\nimport { UX } from 'constant';\r\nimport React from 'react';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setMessage } from 'redux/slices/message.slice';\r\nimport useStyle from './style';\r\n\r\nfunction LoginFacebook() {\r\n  const classes = useStyle();\r\n  const dispatch = useDispatch();\r\n\r\n  // handle success login\r\n  const onLoginSuccess = async () => {\r\n    try {\r\n      dispatch(\r\n        setMessage({\r\n          type: 'success',\r\n          message: 'Đăng nhập thành công',\r\n          duration: UX.DELAY_TIME,\r\n        }),\r\n      );\r\n\r\n      setTimeout(() => {\r\n        location.href = '/';\r\n      }, UX.DELAY_TIME);\r\n    } catch (error) {}\r\n  };\r\n\r\n  const responseFacebook = async (response) => {\r\n    try {\r\n      if (response?.accessToken) {\r\n        const apiRes = await accountApi.postLoginWithFacebook(\r\n          response.accessToken,\r\n        );\r\n        if (apiRes.status === 200) {\r\n          onLoginSuccess();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      const message =\r\n        error.response?.data?.message || 'Đăng nhập thất bại, thử lại !';\r\n\r\n      dispatch(\r\n        setMessage({\r\n          type: 'error',\r\n          message,\r\n          duration: UX.DELAY_TIME,\r\n        }),\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FacebookLogin\r\n      appId={process.env.REACT_APP_FACEBOOK_CLIENT_ID}\r\n      autoload={false}\r\n      callback={responseFacebook}\r\n      render={(renderProps) => (\r\n        <div className={classes.socialBtn} onClick={renderProps.onClick}>\r\n          <img className={classes.socialImg} src={fbIcon} alt=\"FB\" />\r\n          <span className={classes.socialName}>Facebook</span>\r\n        </div>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default LoginFacebook;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}